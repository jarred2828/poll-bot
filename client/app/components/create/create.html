<navbar></navbar>
<md-content class="md-padding create-container">
  <h1>Create Your First Poll</h1>
  <md-card class="create-poll" layout="column">
    <ul ui-sortable="$ctrl.sortableOptions" ng-model="$ctrl.poll.queries" class="list">
      <li>
        <div layout="column" class="header">
          <md-input-container class="poll-name" md-no-float flex="100">
            <input ng-model="$ctrl.poll.name" placeholder="Poll Name"/>
          </md-input-container>
          <md-input-container class="send-to" md-no-float flex="100">
            <input ng-model="$ctrl.poll.sendTo" placeholder="Send To">
            <md-icon md-font-set="material-icons">search</md-icon>
          </md-input-container>
          <md-radio-group ng-model="$ctrl.poll.immediate" class="md-primary immediate">
            <md-radio-button value="1">Send Immediately</md-radio-button>
            <md-radio-button value="0">
              Schedule
            </md-radio-button>
          </md-radio-group>
          <md-input-container class="send-time">
            <md-datepicker ng-model="$ctrl.poll.sendTime" ng-disabled="$ctrl.poll.immediate == 1"></md-datepicker>
          </md-input-container>
        </div>
      </li>
      <li ng-repeat="item in $ctrl.poll.queries" class="item" layout="column" ng-class="{'active':item.active}" layout-align="center center" ng-click="$ctrl.activateItem($index)">
        <div class="draggable-icon">
          <div class="icon-content"></div>
        </div>
        <div layout="column" class="multiple" ng-if="item.type == 'multiple'" ng-init="rootIndex = $index">
          <div layout="row">
            <md-input-container class="question" md-no-float flex>
              <input ng-model="item.question" placeholder="Question"/>
            </md-input-container>
            <md-select ng-model="item.type" class="md-no-underline selection-type" ng-change="$ctrl.changeType(rootIndex)">
              <md-option value="multiple"><md-icon md-font-set="material-icons">radio_button_checked</md-icon>&nbsp;Multiple Option</md-option>
              <md-option value="short"><md-icon md-font-set="material-icons">short_text</md-icon>&nbsp;Short Answer</md-option>
              <md-option value="attachment"><md-icon md-font-set="material-icons">photo</md-icon>&nbsp;Attachment</md-option>
            </md-select>
          </div>
          <div layout="column" class="editable">
            <ul ui-sortable="$ctrl.sortableOptions" ng-model="item.options">
              <li ng-repeat="option in item.options" class="option" layout="row">
                <div class="draggable-icon rotated">
                  <div class="icon-content"></div>
                </div>
                <md-input-container class="option-name" md-no-float flex>
                  <input ng-model="option.name" placeholder="Option"/>
                  <md-icon md-font-set="material-icons" ng-click="$ctrl.removeOption(rootIndex, $index)">close</md-icon>
                </md-input-container>
              </li>
              <li class="option add-new"><a ng-click="$ctrl.addOption(rootIndex)">Add option</a></li>
            </ul>
          </div>
        </div>
        <div layout="column" class="short-answer" ng-if="item.type == 'short'" ng-init="rootIndex = $index">
          <div layout="row">
            <md-input-container class="question" md-no-float flex>
              <input ng-model="item.question" placeholder="Question"/>
            </md-input-container>
            <md-select ng-model="item.type" class="md-no-underline selection-type" ng-change="$ctrl.changeType(rootIndex)">
              <md-option value="multiple"><md-icon md-font-set="material-icons">radio_button_checked</md-icon>&nbsp;Multiple Option</md-option>
              <md-option value="short"><md-icon md-font-set="material-icons">short_text</md-icon>&nbsp;Short Answer</md-option>
              <md-option value="attachment"><md-icon md-font-set="material-icons">photo</md-icon>&nbsp;Attachment</md-option>
            </md-select>
          </div>
          <div layout="column" class="editable">
            <md-input-container class="short-answer-text" md-no-float flex="80">
              <input ng-model="item.answer" placeholder="Short answer text"/>
            </md-input-container>
          </div>
        </div>
        <div layout="column" class="attachment" ng-if="item.type == 'attachment'" ng-init="rootIndex = $index">
          <div layout="row">
            <md-input-container class="question" md-no-float flex>
              <input ng-model="item.question" placeholder="Question"/>
            </md-input-container>
            <md-select ng-model="item.type" class="md-no-underline selection-type" ng-change="$ctrl.changeType(rootIndex)">
              <md-option value="multiple"><md-icon md-font-set="material-icons">radio_button_checked</md-icon>&nbsp;Multiple Option</md-option>
              <md-option value="short"><md-icon md-font-set="material-icons">short_text</md-icon>&nbsp;Short Answer</md-option>
              <md-option value="attachment"><md-icon md-font-set="material-icons">photo</md-icon>&nbsp;Attachment</md-option>
            </md-select>
          </div>
        </div>
        <div class="delete-query">
          <md-icon md-font-set="material-icons" ng-click="$ctrl.removeQuery($index)">delete_sweet</md-icon>
        </div>
      </li>
    </ul>
    <md-divider></md-divider>
    <md-card-actions layout="row" layout-align="space-between end" class="footer">
      <md-button ng-click="$ctrl.addQuery()"><md-icon md-font-set="material-icons">add_circle</md-icon>&nbsp;Add another question</md-button>
      <md-button class="md-primary md-raised">Send</md-button>
    </md-card-actions>
  </md-card>
</md-content>